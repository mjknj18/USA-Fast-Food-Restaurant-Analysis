<!DOCTYPE html>
<html lang="en">

<!-- Define Page Header -->
<head>
  <meta charset="UTF-8">
  <title>USA Fast Food Restaurant Analysis</title>

  <!-- Import Page Style Sheets -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>

  <style>
      body {
        padding: 0;
        margin: 0;
        }

        /* set map, body, and html to 100% of the screen size */
        #map,
        body,
        html {
        height: 100%;
        }

        h1 {
        text-align: center;
        }
  </style>
</head>

<!-- Define Page Body -->
<body>
    <div id = "map"></div>

    <script>
        var data = {{data.chart_data | safe}}
        // Define Satellite Map Layer
        var satellitemap = L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}", {
            attribution: "Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>",
            maxZoom: 18,
            id: "mapbox.satellite",
            accessToken: ""});

        // Define Outdoors Map Layer
        var outdoorsmap = L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}", {
            attribution: "Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>",
            maxZoom: 18,
            id: "mapbox.outdoors",
            accessToken: ""});

        // Define Dark Map Layer
        var darkmap = L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}", {
            attribution: "Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>",
            maxZoom: 18,
            id: "mapbox.dark",
            accessToken: ""});

        // Define Light Map Layer
        var lightmap = L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}", {
            attribution: "Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>",
            maxZoom: 18,
            id: "mapbox.light",
            accessToken: ""});

        // Define Array of Available Maps
        var baseMaps = {
            "Outdoors Map": outdoorsmap,
            "Satellite Map": satellitemap,
            "Dark Map": darkmap,
            "Light Map" : lightmap};

        // Define Map Object
        var myMap = L.map("map", {
            center: [37.09, -95.71],
            zoom: 5,
            layers: [outdoorsmap]});

        // Add Map Layers & Data Layer to Map Object
        L.control.layers(baseMaps).addTo(myMap);

        for (var i = 0; i < data.length; i++) {
            var marker = L.marker([data[i].latitude, data[i].longitude], {
                draggable: true,
                title: data[i].name})
            
            marker.bindPopup("<h1>" + data[i].name + "</h1> <hr> <h3>Address: " + data[i].address + "</h3> <hr> <h3>City: " + data[i].city + "</h3> <hr> <h3>State: " + data[i].province + "</h3> <hr> <h3>Zip: " + data[i].postalCode)

            marker.addTo(myMap)
        }

    </script>
</body>

</html>
